{"version":3,"file":"main.js","mappings":"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","sources":["webpack://stock-app/./src/index.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n    let selectedDate;\r\n    let investmentAmount;\r\n    let currentDate = new Date().toISOString().split('T')[0];\r\n    const stockButtons = document.querySelectorAll(\".button-container button\");\r\n    stockButtons.forEach(button => {\r\n        button.classList.add(\"hide\"); // Initially hide all stock buttons\r\n    });\r\n\r\n    createGraph(\"GOOGL\", \"2023-01-01\", currentDate, 5000);\r\n\r\n    var modal = document.getElementById(\"myModal\");\r\n    var btn = document.getElementById(\"openModalBtn\");\r\n    var closeBtn = document.getElementsByClassName(\"close\")[0];\r\n\r\n    btn.onclick = function() {\r\n        modal.style.display = \"block\";\r\n    }\r\n\r\n    closeBtn.onclick = function() {\r\n        modal.style.display = \"none\";\r\n    }\r\n\r\n    window.onclick = function(event) {\r\n        if (event.target == modal) {\r\n            modal.style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    const findBuySellPoints = (prices) => {\r\n        let n = prices.length;\r\n        let buySellPoints = [];\r\n\r\n        let i = 0;\r\n        while (i < n - 1) {\r\n            // Find local minima as potential buy point\r\n            while (i < n - 1 && prices[i] >= prices[i + 1]) {\r\n                i++;\r\n            }\r\n\r\n            if (i === n - 1) {\r\n                break;\r\n            }\r\n\r\n            let buy = i;\r\n\r\n            // Find local maxima as potential sell point\r\n            while (i < n - 1 && prices[i] <= prices[i + 1]) {\r\n                i++;\r\n            }\r\n\r\n            let sell = i;\r\n\r\n            // Add buy and sell points to the result array\r\n            buySellPoints.push({ buy: { day: buy, price: prices[buy] }, sell: { day: sell, price: prices[sell] } });\r\n        }\r\n\r\n        return buySellPoints;\r\n    };\r\n\r\n    let final_num_shares;\r\n    const calculateInvestedProfit = (investmentAmount, buySellPoints) => {\r\n        let grossRevenueFromInvestment = investmentAmount;\r\n        final_num_shares = 0;\r\n        let netProfit;\r\n        for (let a=0; a<buySellPoints.length; a++) {\r\n            final_num_shares = grossRevenueFromInvestment/buySellPoints[a].buy.price;\r\n            grossRevenueFromInvestment = final_num_shares*buySellPoints[a].sell.price;\r\n        }\r\n\r\n        netProfit = grossRevenueFromInvestment - investmentAmount;\r\n        return netProfit;\r\n    }\r\n\r\n    var appleStock = document.getElementById(\"apple\");\r\n    appleStock.addEventListener(\"click\", function() {\r\n        createGraph(\"AAPL\", selectedDate, currentDate, investmentAmount);\r\n    });\r\n\r\n    var msftStock = document.getElementById(\"microsoft\");\r\n    msftStock.addEventListener(\"click\", function() {\r\n        createGraph(\"MSFT\", selectedDate, currentDate, investmentAmount);\r\n    });\r\n\r\n    var pltrStock = document.getElementById(\"palantir\");\r\n    pltrStock.addEventListener(\"click\", function() {\r\n        createGraph(\"PLTR\", selectedDate, currentDate, investmentAmount);\r\n    });\r\n\r\n    var tslaStock = document.getElementById(\"tesla\");\r\n    tslaStock.addEventListener(\"click\", function() {\r\n        createGraph(\"TSLA\", selectedDate, currentDate, investmentAmount);\r\n    });\r\n\r\n    function removeExistingGraph() {\r\n        const existingGraph = document.querySelector('#chart-container svg');\r\n        if (existingGraph) {\r\n            existingGraph.remove();\r\n        }\r\n    }\r\n\r\n    function createGraph(stockTicker, selectedDate, currentDate, investmentAmount) {\r\n        removeExistingGraph();\r\n        removeExistingGraph();\r\n\r\n        // fetch(`https://api.stockdata.org/v1/data/eod?symbols=${stockTicker}&api_token=Bc9kdoAsBS9RinZk1vqXCzh5owpQenRGf4UrSJl6&date_from=${selectedDate}&date_to=${currentDate}`)\r\n        fetch(`https://api.marketstack.com/v1/eod?access_key=be6bfe4dafee7f9d6e7bb15642e1bdb5&symbols=${stockTicker}&date_from=${selectedDate}&date_to=${currentDate}`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            const closingPrices = data.data.map(day => day.close);\r\n            const dates = data.data.map(date => date.date.slice(0,10));\r\n            const maxPrice = Math.max(...closingPrices);\r\n            const adjustedMaxPrice = maxPrice * 1.35;\r\n            const minPrice = Math.min(...closingPrices);\r\n\r\n            const margin = { top: 60, right: 20, bottom: 50, left: 50 };\r\n            const width = 600 - margin.left - margin.right;\r\n            const height = 400 - margin.top - margin.bottom;\r\n            const buySellPoints = findBuySellPoints(closingPrices);\r\n\r\n            const svg = d3.select('#chart-container')\r\n            .append('svg')\r\n            .attr('width', width + margin.left + margin.right)\r\n            .attr('height', height + margin.top + margin.bottom)\r\n            .append('g')\r\n            .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\r\n\r\n\r\n            const parseDate = d3.timeParse('%Y-%m-%d');\r\n\r\n            const x = d3.scaleBand().range([0, width]).padding(0.1);\r\n            const y = d3.scaleLinear().domain([0, adjustedMaxPrice]).nice().range([height, 0]);\r\n\r\n            const yPlot = d3.scaleLinear().domain([0, maxPrice]).range([height, 0]);\r\n\r\n            // const info = closingPrices.map((price, index) => ({ date: `Day ${index + 1}`, price: price }));\r\n            const dates_prices = dates.map((date, index) => ({ date: date, price: closingPrices[index] })).sort((a, b) => new Date(a.date) - new Date(b.date));\r\n            x.domain(dates_prices.map(d => d.date));\r\n            y.domain([0, adjustedMaxPrice]);\r\n\r\n            svg.append('g')\r\n            .call(d3.axisLeft(y));\r\n\r\n            svg.append(\"text\")\r\n                .attr(\"transform\", \"rotate(-90)\")\r\n                .attr(\"y\", 0 - margin.left)\r\n                .attr(\"x\", 0 - (height / 2))\r\n                .attr(\"dy\", \"1em\")\r\n                .style(\"text-anchor\", \"middle\")\r\n                .text(\"Price ($)\");\r\n\r\n            svg.append('g')\r\n                .attr('class', 'x-axis')\r\n                .attr('transform', 'translate(0,' + height + ')')\r\n                .call(d3.axisBottom(x))\r\n                .selectAll('.tick text') // Select all x-axis text elements\r\n                .attr('class', 'x-axis-label')\r\n                .attr('transform', function(d, i) {\r\n                    if (x.domain().length > 15) {\r\n                        // If there are more than 15 dates, display only the first and last labels\r\n                        if (i === 0 || i === x.domain().length - 1) {\r\n                            return 'rotate(-45)';\r\n                        } else {\r\n                            // Hide other labels by making them transparent and setting text-anchor to middle\r\n                            return 'rotate(0)';\r\n                        }\r\n                    } else {\r\n                        // If there are 15 or fewer dates, rotate all labels\r\n                        return 'rotate(-45)';\r\n                    }\r\n                })\r\n                .style('text-anchor', function(d, i) {\r\n                    // Align the rotated text to the end for first and last labels; middle for others\r\n                    if (x.domain().length > 15) {\r\n                        if (i === 0 || i === x.domain().length - 1) {\r\n                            return 'end';\r\n                        } else {\r\n                            return 'middle';\r\n                        }\r\n                    } else {\r\n                        return 'end';\r\n                    }\r\n                })\r\n                .style('fill-opacity', function(d, i) {\r\n                    // Set fill-opacity to 0 for labels that should be hidden\r\n                    if (x.domain().length > 15) {\r\n                        if (i === 0 || i === x.domain().length - 1) {\r\n                            return 1; // Show first and last labels\r\n                        } else {\r\n                            return 0; // Hide other labels\r\n                        }\r\n                    } else {\r\n                        return 1; // Show all labels if there are 15 or fewer dates\r\n                    }\r\n                });\r\n\r\n            svg.append('text')\r\n                .attr('x', width / 2)\r\n                .attr('y', 0 - margin.top / 2)\r\n                .attr('text-anchor', 'middle')\r\n                .style('font-size', '18px')\r\n                .style('font-weight', 'bold')\r\n                .text(stockTicker.toUpperCase());\r\n\r\n            const line = d3.line()\r\n                .x(d => x(d.date) + x.bandwidth() / 2) // Position the line in the middle of the band\r\n                .y(d => y(d.price))\r\n                .curve(d3.curveBasis); // Use curveMonotoneX for smooth interpolation\r\n\r\n                svg.append('path')\r\n                .datum(dates_prices)\r\n                .attr('class', 'line')\r\n                .attr('d', line)\r\n                .attr('stroke', 'steelblue') // Set line color\r\n                .attr('stroke-width', 5)      // Set line width\r\n                .attr('fill', 'none')\r\n                .attr('stroke-dasharray', function() {\r\n                    const totalLength = this.getTotalLength();\r\n                    return totalLength + \" \" + totalLength;\r\n                })\r\n                .attr('stroke-dashoffset', function() {\r\n                    return this.getTotalLength();\r\n                })\r\n                .transition()\r\n                .duration(2000)  // Set transition duration in milliseconds\r\n                .attr('stroke-dashoffset', 0);\r\n\r\n                const bisect = d3.bisector(d => d.date).left;\r\n\r\n                svg.select('.line')\r\n                    .on('mousemove', function (event) {\r\n                        const [mouseX, mouseY] = d3.pointer(event);\r\n                        // Calculate the index of the closest band based on the mouse position\r\n                        const index = Math.floor((mouseX - margin.left) / x.bandwidth());\r\n                        // Ensure the index is within valid bounds\r\n                        const validIndex = Math.max(0, Math.min(index, dates_prices.length - 1));\r\n                        const closestDataPoint = dates_prices[validIndex];\r\n\r\n                        const tooltip = d3.select('#tooltip');\r\n                        const offsetX = 100;\r\n                        const offsetY = 150;\r\n\r\n                        tooltip.style('left', mouseX + offsetX + 'px')\r\n                        .style('top', mouseY + offsetY + 'px')\r\n                        .style('opacity', .8)\r\n                        .style('box-shadow', '2px 2px 5px rgba(0, 0, 0, 0.5)')\r\n                        .html(`Price: $${closestDataPoint.price.toFixed(2)}`)\r\n\r\n                        tooltip.transition()\r\n                        .duration(200)\r\n                        .style('opacity', 1)\r\n                    })\r\n\r\n                    .on('mouseout', function(event, d) {\r\n                        // Set a timeout to hide the tooltip after 1000 milliseconds (1 second)\r\n                        tooltip.node().timeout = setTimeout(() => {\r\n                            tooltip.transition()\r\n                                .duration(200)\r\n                                .style('opacity', 0); // Set final opacity after transition\r\n                        }, 1000);\r\n                    })\r\n\r\n                    // .on('mouseout', function () {\r\n                    //     d3.select('#tooltip').style('opacity', 0);\r\n                    // });\r\n\r\n\r\n            let reversed_buySellPoints = buySellPoints.reverse();\r\n            // Create a transition for the buy circles after the line has been created\r\n// Create a transition for the buy circles after the line has been created\r\nsvg.selectAll('.buy-circle')\r\n    .data(reversed_buySellPoints)\r\n    .enter().append('circle')\r\n    .attr('class', 'buy-circle')\r\n    .attr('r', 0) // Start with radius 0 for initial hidden state\r\n    .attr('cx', d => x(dates[d.buy.day]))\r\n    .attr('cy', d => y(closingPrices[d.buy.day]))\r\n    .style('fill', '#359d2f')\r\n    .transition() // Apply transition to circles\r\n    .delay((d, i) => i * 70) // Delay each circle by 500 milliseconds times its index\r\n    .duration(1000) // Transition duration 1000 milliseconds (or adjust as needed)\r\n    .attr('r', 2); // End with radius 5 for visible state\r\n\r\n// Create a transition for the sell circles after the buy circles transition is completed\r\nsvg.selectAll('.sell-circle')\r\n    .data(reversed_buySellPoints)\r\n    .enter().append('circle')\r\n    .attr('class', 'sell-circle')\r\n    .attr('r', 0) // Start with radius 0 for initial hidden state\r\n    .attr('cx', d => x(dates[d.sell.day]))\r\n    .attr('cy', d => y(closingPrices[d.sell.day]))\r\n    .style('fill', 'red')\r\n    .transition() // Apply transition to circles\r\n    .delay((d, i) => i * 70) // Delay each circle by 500 milliseconds times its index\r\n    .duration(1000) // Transition duration 1000 milliseconds (or adjust as needed)\r\n    .attr('r', 2); // End with radius 5 for visible state\r\n            const svgElements = document.querySelectorAll(\"svg\");\r\n\r\n            // Iterate over each SVG element and set the height\r\n            svgElements.forEach(svgElement => {\r\n                svgElement.style.height = height + margin.top + margin.bottom + 'px'; // Set the height including top and bottom margins\r\n            });\r\n\r\n            //Display max and min prices in the browser\r\n            const maxPriceElement = document.getElementById('max-price');\r\n            const minPriceElement = document.getElementById('min-price');\r\n            // maxPriceElement.textContent = `Maximum Price: $${maxPrice}`;\r\n            // minPriceElement.textContent = `Minimum Price: $${minPrice}`;\r\n\r\n            //Display multiple buy and sell points in the browser\r\n            const buySellPointsElement = document.getElementById('buy-sell-points');\r\n            // buySellPointsElement.textContent = `Buy and Sell Points:\\n`;\r\n            buySellPoints.forEach(({ buy, sell }) => {\r\n                // buySellPointsElement.textContent += `Buy at Day ${buy.day + 1} ($${buy.price.toFixed(2)})\\nSell at Day ${sell.day + 1} ($${sell.price.toFixed(2)})\\n\\n`;\r\n            });\r\n\r\n\r\n            //Calculate and display net profit\r\n            const profitElement = document.getElementById('profit');\r\n            // profitElement.textContent = \"Net Profit: \";\r\n            const netProfit = calculateInvestedProfit(investmentAmount, buySellPoints);\r\n            // profitElement.textContent += `$${netProfit.toFixed(2)}`;\r\n\r\n            let currentProfit = 0;\r\n            let profitArray = [];\r\n            for (let i = 0; i < buySellPoints.length; i++) {\r\n                // grossRevenueFromInvestment = (grossRevenueFromInvestment / buySellPoints[i].buy.price) * buySellPoints[i].sell.price;\r\n                // grossRevenues.push(grossRevenueFromInvestment);\r\n                currentProfit += buySellPoints[i].sell.price - buySellPoints[i].buy.price;\r\n                profitArray.push(currentProfit);\r\n                profitArray[i] *= final_num_shares;\r\n\r\n            }\r\n\r\n            const formattedDates = [];\r\n\r\n            for (let i = 0; i < buySellPoints.length; i++) {\r\n                // const buyDate = dates_prices[buySellPoints[i].buy.day - 1].date;\r\n                const buyDate = dates_prices[buySellPoints[i].buy.day].date;\r\n                // const sellDate = dates_prices[buySellPoints[i].sell.day - 1].date;\r\n                const sellDate = dates_prices[buySellPoints[i].sell.day].date;\r\n                formattedDates.push(`Buy: ${buyDate}, Sell: ${sellDate}`);\r\n\r\n            }\r\n\r\n            // Set the dimensions of the canvas\r\n            var bpmargin = { top: 60, right: 20, bottom: 50, left: 50 };\r\n            var bpwidth = 600 - bpmargin.left - bpmargin.right;\r\n            var bpheight = 400 - bpmargin.top - bpmargin.bottom;\r\n\r\n            // Create an SVG element and append it to the body\r\n            var bpsvg = d3.select(\"#chart-container\")\r\n            .append(\"svg\")\r\n            .style(\"overflow\", \"visible\")\r\n            .attr(\"width\", bpwidth + bpmargin.left + bpmargin.right)\r\n            .attr(\"height\", bpheight + bpmargin.top + bpmargin.bottom)\r\n            .append(\"g\")\r\n            .attr(\"transform\", \"translate(\" + bpmargin.left + \",\" + bpmargin.top + \")\");\r\n\r\n            // Create x and y scales\r\n            var bpx = d3.scaleBand()\r\n            .domain(d3.range(profitArray.length))\r\n            .range([0, width])\r\n            .padding(0.1);\r\n\r\n            var bpy = d3.scaleLinear()\r\n            .domain([0, d3.max(profitArray)])\r\n            .nice()\r\n            .range([height, 0]);\r\n\r\n            // Create bars\r\n            bpsvg.selectAll(\".bar\")\r\n            .data(profitArray)\r\n            .enter().append(\"rect\")\r\n            .attr(\"class\", \"bar\")\r\n            .attr(\"class\", \"bar bar-transition\")\r\n            .attr(\"data-index\", function(d, i) { return i; }) // Set data-index attribute\r\n            .attr(\"x\", function(d, i) { return bpx(i); })\r\n            .attr(\"width\", bpx.bandwidth())\r\n            .attr(\"y\", function(d) { return bpy(d); })\r\n            .attr(\"height\", function(d) { return height - bpy(d); })\r\n            .on('mouseover', function(event) {\r\n                const index = d3.select(this).attr('data-index');\r\n                const tooltip = d3.select('#tooltip');\r\n                tooltip.transition().duration(200).style('opacity', 0.8);\r\n                tooltip.html(`Trade Dates: ${formattedDates[index]}`)\r\n                    .style('left', event.pageX + 'px')\r\n                    .style('top', event.pageY - 28 + 'px');\r\n            })\r\n            .on('mouseout', function() {\r\n                d3.select('#tooltip').transition().duration(500).style('opacity', 0);\r\n            });\r\n\r\n            // Apply transition effect only to bars with the class 'bar-transition'\r\n            bpsvg.selectAll(\".bar-transition\")\r\n            .transition() // Apply transition effect\r\n            .duration(1000) // Set the duration of the transition in milliseconds\r\n            .attr(\"y\", function(d) { return bpy(d); })\r\n            .attr(\"height\", function(d) { return height - bpy(d); });\r\n\r\n\r\n            // Create x-axis\r\n            bpsvg.append(\"g\")\r\n                .attr(\"class\", \"x-axis\")\r\n                .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n                .call(d3.axisBottom(bpx).tickSize(0).tickFormat(\"\"));\r\n\r\n\r\n            // Create y-axis\r\n            bpsvg.append(\"g\")\r\n            .attr(\"class\", \"y-axis\")\r\n            .call(d3.axisLeft(bpy))\r\n            .append(\"text\")\r\n            .attr(\"transform\", \"rotate(-90)\")\r\n            .attr(\"y\", 0 - bpmargin.left)\r\n            .attr(\"x\", 0 - (bpheight / 2))\r\n            .attr(\"dy\", \".5em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .style(\"fill\", \"black\")\r\n            .style(\"font-size\", \"16px\")\r\n            .text(\"Accumulated Profit ($)\");\r\n\r\n            bpsvg.append('text')\r\n            .attr('x', width / 2)\r\n            .attr('y', 0 - margin.top / 2)\r\n            .attr('text-anchor', 'middle')\r\n            .style('font-size', '18px')\r\n            .style('font-weight', 'bold')\r\n            .text(\"Net Accumulated Profit\");\r\n        })\r\n\r\n        .catch(error => {\r\n            console.error('Error:', error);\r\n        });\r\n    }\r\n\r\n    const handletickerSubmit = (e) => {\r\n        e.preventDefault();\r\n        stockButtons.forEach(button => {\r\n            button.classList.remove(\"hide\");\r\n        });\r\n\r\n        const tickerInput = document.querySelector(\".ticker-input\");\r\n        const dateInput = document.querySelector(\".date-input\");\r\n        const investmentInput = document.querySelector(\".investment-input\");\r\n        let stockTicker = tickerInput.value;\r\n        selectedDate = dateInput.value;\r\n        investmentAmount = parseFloat(investmentInput.value);\r\n        currentDate = new Date().toISOString().split('T')[0];\r\n\r\n        createGraph(stockTicker, selectedDate, currentDate, investmentAmount);\r\n    };\r\n\r\n    const listSubmitButton = document.querySelector(\".ticker-submit\");\r\n    listSubmitButton.addEventListener(\"click\", handletickerSubmit);\r\n});\r\n"],"names":["document","addEventListener","selectedDate","investmentAmount","currentDate","Date","toISOString","split","stockButtons","querySelectorAll","forEach","button","classList","add","createGraph","modal","getElementById","btn","closeBtn","getElementsByClassName","onclick","style","display","window","event","target","findBuySellPoints","prices","n","length","buySellPoints","i","buy","sell","push","day","price","final_num_shares","calculateInvestedProfit","netProfit","grossRevenueFromInvestment","a","removeExistingGraph","existingGraph","querySelector","remove","stockTicker","fetch","then","response","json","data","closingPrices","map","close","dates","date","slice","maxPrice","Math","max","adjustedMaxPrice","margin","min","width","height","svg","d3","select","append","attr","x","timeParse","scaleBand","range","padding","y","scaleLinear","domain","nice","dates_prices","index","sort","b","d","call","axisLeft","text","axisBottom","selectAll","toUpperCase","line","bandwidth","curve","curveBasis","datum","totalLength","this","getTotalLength","transition","duration","bisector","left","on","mouseX","mouseY","pointer","floor","validIndex","closestDataPoint","tooltip","html","toFixed","node","timeout","setTimeout","reversed_buySellPoints","reverse","enter","delay","svgElement","currentProfit","profitArray","formattedDates","buyDate","sellDate","bpsvg","bpwidth","bpheight","bpx","bpy","pageX","pageY","tickSize","tickFormat","catch","error","console","e","preventDefault","tickerInput","dateInput","investmentInput","value","parseFloat"],"ignoreList":[],"sourceRoot":""}